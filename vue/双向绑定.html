<html>
<head>
    <title>vue双向绑定的简单实现</title>
</head>
<body>
    <input type="text" name="" value="" id='input'>
    <script type="text/javascript">
        let data = {
            msg: 'hello',
            count: 10
        }

        // 模拟 Vue 的实例
        let vm = {}

        proxyData(data)

        function proxyData(data) {
            // 遍历 data 对象的所有属性
            Object.keys(data).forEach(key => {
                // 把 data 中的属性，转换成 vm 的 getter/setter
                Object.defineProperty(vm, key, {
                    enumerable: true,
                    configurable: true,
                    get() {
                        return data[key]
                    },
                    set(newValue) {
                        console.log('set: ', key, newValue)
                        if (newValue === data[key]) {
                            return
                        }
                        data[key] = newValue
                        // 数据更改，更新 DOM 的值
                        document.getElementById('input').value = data[key]
                    }
                })
            })
        }
        document.getElementById('input').addEventListener('input', function (e) {
            vm.msg = e.target.value;
        })
    </script>
</body>

</html>